}
            } catch {
                document.getElementById('status').innerHTML = '❌ ' + (currentLang === 'ar' ? 'خطأ في الاتصال' : 'Connection error');
            } finally {
                downloading = false;
                document.getElementById('downloadBtn').disabled = false;
            }
        }

        document.getElementById('downloadBtn').addEventListener('click', handleDownload);

        // إغلاق القائمة عند النقر خارجها
        document.addEventListener('click', function(event) {
            const menuBtn = document.querySelector('.menu-btn');
            if (!sidebar.contains(event.target) && !menuBtn.contains(event.target) && sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });

        // اللغة الافتراضية
        updateLanguage('ar');
    </script>
</body>
</html>
